[TOC]

- 用户进入 ——> 选择身份



# 学生

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8pkh17vykj312r0u0q9b.jpg)

- 输入**学号**
  - 要在student表中存在
    - 存在——保存学号
    - 不存在——提示
- 选择功能



## 1. 申请加分项

### 1.1. 选择要申请的类别&明细

- 选择**类别** extra
  - 显示各类别的名称
  - input ——> extra
- 选择**加分项明细**
  - 显示加分项的具体内容
  - Input ——> detail

### 1.2. 提交分数与说明

- 输入信息
  - **说明** input ——> remarks
    - 可为空
  - **学生申请分数** ——> s_point
    - 若超出上下限，无法提交
      - *应用程序判断，从extra_name中提取max&min的值*
    - 若不是数字，无法提交
      - *应用程序判断*
- 提交
  - *审核小组分数 g_point，审核状态 status，通过状态 pass在提交后预设为初设状态*
    - 实现：*trigger*
    - g_point = s_point
    - status = 0
    - pass = 0



## 2. 查看已申请的加分项

- extra
- 条件查询：年份、类别

- 默认按照加分项明细detail值进行排序



### 2.1. 修改已申请的加分项

- 选择要修改的加分项的序号
- 显示要修改的加分项各项信息
- 选择要修改的项目
- 输入更改的内容并提交
  - 类比 1.2



### 2.2. 删除已申请的加分项

- 选择要删除的加分项的序号





# 管理员

![](https://tva1.sinaimg.cn/large/006y8mN6ly1g8pp4hd7v7j312r0u0n7v.jpg)



## 1. 添加学生信息

- 输入信息
  - 学号 s_no
    - 170811008
      - 17 入学年份
      - 08 系
      - 11 专业
      - 008 个人编号
  - 姓名 s_name
    - 
  - 班级 s_class
    - 1701 入学日期 班级
  - 系别专业 s_pro
    - 10101
      - 1
      - 01 系
      - 01 专业
  - 属性 s_feature
  - 输入样式：s_no,s_name,s_class,s_pro,s_feature
- 提交
  - *对输入的字符串进行分割，分条插入到学生表中*
  - *显示后续操作指示*



### 1.1. 删除学生信息

（在调用查看所有学生信息的基础上）

- 输入要删除的学生学号 s_no
- 提交
  - *提示，删除成功*
  - *显示后续操作指示*



### 1.2. 修改学生信息

（在调用查看所有学生信息的基础上）

- 输入要修改的学生学号 s_no
- 显示要修改的学生各项信息
- 选择要修改的项目
- 输入更改的内容并提交



### 1.3. 查询学生信息

- 条件查询：学号、姓名、班级、系别专业
- 排序查询：学号、姓名、班级、系别专业
  - *函数判断用户输入的条件*
  - *显示后续操作指示*



## 2. 添加课程信息

- 输入信息
  - 课程号 crs_no
    - 102023
  - 课程名 s_name
  - 课程学分 crs_point
  - 课程类型 crs_type
    - t/e
    - *应用程序判断是否为t/e*
  - 输入样式：crs_no,s_name,crs_point,crs_type
- 提交
  - *对输入的字符串进行分割，分条插入到课程表中*
  - *显示后续操作指示*



### 2.1. 删除课程信息

（在调用查看所有学生信息的基础上）

- 输入要删除的课程号 crs_no
- 提交
  - *提示，删除成功*
  - *显示后续操作指示*



### 2.2. 修改课程信息

（在调用查看所有学生信息的基础上）

- 输入要修改的课程号 s_no
- 显示要修改的课程各项信息
- 选择要修改的项目
- 输入更改的内容并提交



### 2.3. 查询课程信息

- 条件查询：课程号、课程名、课程学分、课程类型
- 排序查询：课程号、课程学分、课程类型
  - *函数判断用户输入的条件*
  - *显示后续操作指示*



---



## 3. 添加学生成绩

- 年份
- 输入信息
  - 学号 s_no
    - *错误处理程序：输入的学号在学生表中不存在*
  - 课程号 crs_no
    - *错误处理程序：输入的课程号在课程表中不存在*
  - 成绩 crs_grade
    - *应用程序判断输入成绩的范围：0～100*
  - 输入样式：s_no,crs_no,crs_grade
- 提交
  - *对输入的字符串进行分割，判断通过后，分条插入到grade_by_course表中*
  - *显示后续操作指示*



### 3.1. 删除某学生某科的信息

- 按学号删除
  - 输入某学生的学号
  - 显示该学生所有科目成绩
  - 删除该学生所有科目成绩
    - *调用存储程序*
    - *显示后续操作*
  - 删除该学生某一科成绩
    - 输入该科目的课程号
    - 提交
      - *提示，删除成功*
      - *显示后续操作*



### 3.2. 修改某学生某科成绩

（在调用查看所有学生信息的基础上）

- 按学号查找

- 输入某学生的学号
- 显示该学生所有科目成绩
- 输入
  - 该学生要修改的科目的课程号 crs_no
  - 修改的成绩 crs_grade
  - 输入样式：crs_no,crs_grade

- 提交

  

### 3.3. 查询学生某科成绩

- 条件查询：学号、课程号
  - 输入要查询的学号/课程号
  - 显示该学生所有科目的成绩/该课程所有学生的成绩
    - 默认按照学号/课程号进行排序



---



## 4. 浏览学生申报的加分项

- 选择要浏览的年份
- 选择要浏览的班级
- 显示该年份该班级所有学生申报的加分项
  - 默认排序
    - 一级：学号
    - 二级：extra
    - 三级：detail



### 4.1. 审核加分项

（在浏览某年份某班级学生申报加分项的基础上）

- *筛选未审核的加分项*
  - 默认排序
    - 一级：学号
    - 二级：extra
    - 三级：detail
- 逐条显示筛选结果进行审核
  - if 学生申请分数 s_point 合理
    - 1——> 审核状态 status
    - 1——> 通过状态 pass
    - 显示下一条记录
  - if 学生申请分数 s_point 不合理（分值不合理）
    - update g_point的分值 改成合理的分值
    - 1——> 审核状态 status
    - 1 ——> 通过状态 pass
    - 显示下一条记录
  - if 学生申请说明 remarks 不合理（乱加分）
    - update 0 ——> g_point
    - 1——> 审核状态 status
    - 0 ——> 通过状态 pass
    - 显示下一条记录



---



## 5. 浏览综测评分标准

- 列出综合测评的所有评分标准
  - 按照类别进行分类
  - 默认排序
    - detail
  - 显示
    - 序号
      - *应用程序附加*
    - 加分项名称
    - 最高分
    - 最低分



### 5.1. 添加评分标准

- 选择该评分标准所属类别
- *系统为其指定加分项明细 detail*
  - *应用程序结合从数据库中调用的值 + 1 作为detail 值传入到数据库中*
- 输入加分项名称 name
- 输入加分项的最高分 max，如果不存在上限，则无需输入
- 输入加分项的最低分 min，通常为0



### 5.2. 修改评分标准

- 选择要修改的评分标准的类别
- 显示该类别所有的评分标准
  - 默认排序：detail
- 选择要修改的项目
- 输入更改的内容并提交
  - 类比 1.2



### 5.3. 删除评分标准

- 选择要删除的评分标准所属类别
- 显示该类别所有的评分标准
- 输入要删除的评分标准的detail
  - *提示，删除成功*
  - *显示后续操作指示*



---



## 6. 浏览学生综测情况

- 选择要查看的表
  - 总表 summary
    - 生成
      - 
    - 序号
    - 学号
      - s
  - 德育表 me
    - 生成
      - 年份
        - select year from extra
      - 学号
        - select s_no from extra
      - 基础分
        - 15分
        - *自动填写*
      - 加分项总分 
        - `s1 = sum(g_point) `
          -  `where status == 1 and pass ==1 `
          - `where  extra.s_no = me.s_no and extra.extra == me_etr`
        - *事务？*
      - 减分项总分
        - `s2 = sum(g_point) `
          -  `where status == 1 and pass ==1 `
          - `where  extra.s_no = me.s_no and extra.extra == me_mns`
      - 总分
        - `st = s1 - s2`
        - `if st > 10 then st = 10`
        - `if st <= 10 then st`
  - 智育表
  - 体育表



## 查看学生加分项情况（审核未结束）

### 查：按[年份/专业/班级]查看学生的加分项情况

- 排序：类别
- 



## 查看学生综测情况（审核结束后）

### 查：按班级查看测评总表

- 可进行排序

### 查：按班级查看德育表/智育表/体育表



### （查：查询某一同学的详情）



